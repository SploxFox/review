!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);t.Grouping=class extends o.Constituent{constructor(e){super(),this.composition=e}get formula(){return this.composition.formula}get molarMass(){return this.composition.molarMass*this.count}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(8);t.Constituent=class extends o.Entity{constructor(e=1){super(),this.count=e}get formula(){throw"String for this object not defined."}get molarMass(){throw"Method for molar mass not defined."}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),r=n(3);t.Atom=class extends o.Constituent{constructor(e,t=1){super(t),this.element=e}get formula(){return 1==this.count?this.element.symbol:this.element.symbol+r.subscriptify(this.count.toString())}get molarMass(){return this.element.atomicMass*this.count}}},function(e,t,n){"use strict";var o;function r(e){return e.replace(/₀|₁|₂|₃|₄|₅|₆|₇|₈|₉|₊|₋|₌|₍|₎/g,e=>o.normal[o.subscript.indexOf(e)]).replace(/⁰|¹|²|³|⁴|⁵|⁶|⁷|⁸|⁹|⁺|⁻|⁼|⁽|⁾/,e=>o.normal[o.superscript.indexOf(e)])}function i(e){return null!=e.match(/₀|₁|₂|₃|₄|₅|₆|₇|₈|₉|₊|₋|₌|₍|₎/g)}function s(e,t){var n=document.createElement("div");n.classList.add("fraction");var o=document.createElement("span");o.textContent=e;var r=document.createElement("span");return r.textContent=t,n.appendChild(o),n.appendChild(r),n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.normal="0123456789+-=()",e.subscript="₀₁₂₃₄₅₆₇₈₉₊₋₌₍₎",e.superscript="⁰¹²³⁴⁵⁶⁷⁸⁹⁺⁻⁼⁽⁾"}(o=t.CharacterSets||(t.CharacterSets={})),t.subscriptify=function(e){return e.replace(/[0-9]|\+|=\(|\)/g,e=>o.subscript[o.normal.indexOf(e)])},t.normify=r,t.hasSubscript=i,t.richify=function(e){for(var t=document.createElement("div"),n="",o=0;o<e.length;o++)if("$"==e[o]){var a;t.appendChild(document.createTextNode(r(n))),n="";var c=e.substring(o+1).split(")")[0];console.log(c);var l=c.split("(")[1].split(",");console.log(l);var m=c.split("(")[0];switch(console.log(m),m){case"frac":a=s(l[0],l[1])}t.appendChild(a),o+=c.length+1}else if(i(e[o])){t.appendChild(document.createTextNode(r(n))),n="";var u=document.createElement("sub");u.textContent=r(e[o]),t.appendChild(u)}else n+=e[o];return t.appendChild(document.createTextNode(r(n))),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(5),r=n(6),i=n(7),s=n(9),a=n(2),c=n(3),l=n(10);function m(){var e=Object.keys(r.PeriodicTable.elements);return r.PeriodicTable.elements[e[e.length*Math.random()<<0]]}function u(e,t,n){var o=Math.random()*(t-e)+e;return o==n?u(e,t,n):o}function d(e){var t,n=function e(){var t=u(1,5)<<0,n=u(1,6)<<0;console.log("Base: "+t+", Factor: "+n);var o=new i.Molecule(new s.Composition([new a.Atom(m(),t),new a.Atom(m(),t*n)]));return o.composition[0].element.name==o.composition[1].element.name?e():o}();switch(e){case"empirical-to-chemical":t=new o.Question("What is the chemical formula of a molecule with the empirical formula "+n.composition.empirical.formula+" and a molar mass of $frac("+Math.round(1e3*n.molarMass)/1e3+"g,mol)?",n.formula);break;case"mass-percent-to-chemical":t=new o.Question("A molecule of "+n.composition[0].element.name+" and "+n.composition[1].element.name+" is made up of "+Math.round(n.composition[0].molarMass/n.molarMass*1e3)/10+"% "+n.composition[0].element.name+", and it has a molar mass of $frac("+Math.round(1e3*n.molarMass)/1e3+"g,mol). What is its molecular formula?",n.formula);break;case"mass-percent-to-empirical":t=new o.Question("A molecule of "+n.composition[0].element.name+" and "+n.composition[1].element.name+" is made up of "+Math.round(n.composition[0].molarMass/n.molarMass*1e3)/10+"% "+n.composition[0].element.name+". What is its empirical formula?",n.composition.empirical.formula);break;case"two-mass-compositions-to-chemical":var r=u(1,5)<<0,l=u(1,5,r)<<0,d=Math.random()+1;n.composition.hillSort(),t=new o.Question("Let's suppose that "+n.composition[0].element.name+" and "+n.composition[1].element.name+" come together to form two different compounds. Compound 1 has "+Math.round(n.composition[0].element.atomicMass*r*d*100)/100+"g of "+n.composition[0].element.name+" and "+Math.round(n.composition[1].element.atomicMass*l*d*100)/100+"g of "+n.composition[1].element.name+". Compound 2 has "+Math.round(n.composition[0].molarMass*d*100)/100+"g of "+n.composition[0].element.name+" and "+Math.round(n.composition[1].molarMass*d*100)/100+"g of "+n.composition[1].element.name+". If the chemical formula of Compound 1 is "+n.composition[0].element.symbol+(1==r?"":c.subscriptify(r.toString()))+n.composition[1].element.symbol+(1==l?"":c.subscriptify(l.toString()))+", then what is the chemical formula of Compound 2?",n.formula)}return t}function f(){var e=document.getElementById("answer"),t=l.getCaretPosition(e)[0];e.innerHTML=c.richify(c.subscriptify(e.textContent)).innerHTML;var n=document.createRange(),o=window.getSelection();n.setStart(l.getSelectionStart(),t),n.collapse(!0),o.removeAllRanges(),o.addRange(n)}window.addEventListener("load",function(){document.getElementById("checkAnswer").addEventListener("click",function(e){var t=c.subscriptify(document.getElementById("answer").textContent);console.log(t),t==document.getElementById("answer").dataset.correctAnswer?document.getElementById("feedback").textContent="Correct!":document.getElementById("feedback").textContent="Incorrect."});var e="normal";window.addEventListener("keyup",function(t){48<=t.keyCode&&t.keyCode<=57&&"normal"==e?(e="subscript",f()):65<=t.keyCode&&t.keyCode<=90&&"subscript"==e&&(e="normal",f())}),document.getElementById("seeSolution").addEventListener("click",function(){document.getElementById("feedback").innerHTML="Solution: "+c.richify(document.getElementById("answer").dataset.correctAnswer).innerHTML}),document.getElementById("questionSelect").addEventListener("change",function(){""!=this.value&&(document.getElementById("generateQuestion").classList.remove("disabled"),document.getElementById("generateQuestion").classList.add("important"))}),document.getElementById("generateQuestion").addEventListener("click",function(){if(!document.getElementById("generateQuestion").classList.contains("disabled")){var e=d(document.getElementById("questionSelect").value);document.getElementById("prompt").innerHTML="",document.getElementById("prompt").appendChild(c.richify(e.prompt)),document.getElementById("answer").dataset.correctAnswer=e.answer,document.getElementById("question").style.display="block",document.getElementById("generateQuestion").classList.remove("important"),document.getElementById("feedback").textContent="",document.getElementById("answer").innerHTML=""}})}),console.log(new s.Composition([new a.Atom(r.PeriodicTable.elements.hydrogen,2),new a.Atom(r.PeriodicTable.elements.oxygen)]))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Question=class{constructor(e,t){this.prompt=e,this.answer=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PeriodicTable=class{static get elements(){return{hydrogen:{symbol:"H",name:"hydrogen",atomicMass:1.008,number:1,group:1},carbon:{symbol:"C",name:"carbon",atomicMass:12.011,number:6},nitrogen:{symbol:"N",name:"nitrogen",atomicMass:14.007,number:7},oxygen:{symbol:"O",name:"oxygen",atomicMass:15.999,number:8},phosphorus:{symbol:"P",name:"phosphorus",atomicMass:30.974,number:15},sulfur:{symbol:"S",name:"sulfur",atomicMass:32.06,number:16},chlorine:{symbol:"Cl",name:"chlorine",atomicMass:35.45,number:17},iodine:{symbol:"I",name:"iodine",atomicMass:126.9,number:53}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);t.Molecule=class extends o.Grouping{constructor(e){super(e),console.log("Created new molecule with formula "+this.formula)}get formula(){return 1==this.count?super.formula:this.count.toString()+super.formula}get molarMass(){for(var e=0,t=0;t<this.composition.length;t++)e+=this.composition[t].molarMass;return e}parseFormula(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Entity=class{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),r=n(0);class i extends Array{constructor(e=[]){super();for(var t=0;t<e.length;t++)this[t]=e[t];this.hillSort()}get empirical(){this.hillSort();for(var e=Array.from(this);;)try{e=s(e)}catch(e){break}return new i(e)}get formula(){this.hillSort();for(var e="",t=0;t<this.length;t++)e+=this[t].formula;return e}get molarMass(){for(var e=0,t=0;t<this.length;t++)e+=this[t].molarMass;return e}hillSort(){this.sort((e,t)=>e.formula.toLowerCase()<t.formula.toLowerCase()?-1:1);var e=this.find(e=>e instanceof o.Atom&&"carbon"==e.element.name);if(e){var t=this.find(e=>e instanceof o.Atom&&"hydrogen"==e.element.name);t&&(this.splice(this.indexOf(t),1),this.unshift(t)),this.splice(this.indexOf(e),1),this.unshift(e)}}}function s(e){var t=[],n=Math.min(...e.map(e=>e.count));if(console.log(n),1==n)throw console.log(1==n),"Error: Array of constituents is already simplified!";if(console.log("Empirical array length: "+t.length),e.forEach(e=>{var i;i=e instanceof r.Grouping?new r.Grouping(e.composition):new o.Atom(e.element);var s=e.count/n;i.count=s,t.push(i)}),t.every(e=>Number.isInteger(e.count)))return console.log(t),t;throw"Error: Array of constituents is already simplified!"}t.Composition=i},function(e,t,n){"use strict";function o(e,t){var n=t(e);for(e=e.firstChild;!1!==n&&e;e=e.nextSibling)n=o(e,t);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectionStart=function(){var e=document.getSelection().anchorNode;return 3==e.nodeType?e.parentNode:e},t.node_walk=o,t.getCaretPosition=function(e){var t=window.getSelection(),n=[0,0];if(t.anchorNode==e)n=[t.anchorOffset,t.extentOffset];else{var r=[t.anchorNode,t.extentNode];if(!e.contains(t.anchorNode)||!e.contains(t.extentNode))return;var i,s=[0,0];o(e,function(e){for(i=0;i<2;i++)if(e==r[i]&&(s[i]=!0,s[0==i?1:0]))return!1;if(e.textContent&&!e.firstChild)for(i=0;i<2;i++)s[i]||(n[i]+=e.textContent.length)}),n[0]+=t.anchorOffset,n[1]+=t.extentOffset}return n[0]<=n[1]?n:[n[1],n[0]]}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoZW1pc3RyeS9ncm91cGluZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hlbWlzdHJ5L2NvbnN0aXR1ZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9jaGVtaXN0cnkvYXRvbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZm9ybWF0dGluZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3F1ZXN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9wZXJpb2RpYy10YWJsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hlbWlzdHJ5L21vbGVjdWxlLnRzIiwid2VicGFjazovLy8uL3NyYy9jaGVtaXN0cnkvZW50aXR5LnRzIiwid2VicGFjazovLy8uL3NyYy9jaGVtaXN0cnkvY29tcG9zaXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhcmV0LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY29uc3RpdHVlbnRfMSIsIkdyb3VwaW5nIiwiQ29uc3RpdHVlbnQiLCJbb2JqZWN0IE9iamVjdF0iLCJjb21wb3NpdGlvbiIsInN1cGVyIiwidGhpcyIsImZvcm11bGEiLCJtb2xhck1hc3MiLCJjb3VudCIsImVudGl0eV8xIiwiRW50aXR5IiwiZm9ybWF0dGluZ18xIiwiQXRvbSIsImVsZW1lbnQiLCJzeW1ib2wiLCJzdWJzY3JpcHRpZnkiLCJ0b1N0cmluZyIsImF0b21pY01hc3MiLCJDaGFyYWN0ZXJTZXRzIiwibm9ybWlmeSIsInN0cmluZyIsInJlcGxhY2UiLCJtYXRjaCIsIm5vcm1hbCIsInN1YnNjcmlwdCIsImluZGV4T2YiLCJzdXBlcnNjcmlwdCIsImhhc1N1YnNjcmlwdCIsIm5ld0ZyYWN0aW9uIiwidG9wIiwiYm90dG9tIiwiZnJhY0RpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRvcEVsIiwidGV4dENvbnRlbnQiLCJib3R0b21FbCIsImFwcGVuZENoaWxkIiwicmljaGlmeSIsImRpdiIsImN1cnJlbnRTdHJpbmciLCJsZW5ndGgiLCJuZXdFbGVtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJjb21tYW5kIiwic3Vic3RyaW5nIiwic3BsaXQiLCJjb25zb2xlIiwibG9nIiwiYXJncyIsImNoYXIiLCJxdWVzdGlvbl8xIiwicGVyaW9kaWNfdGFibGVfMSIsIm1vbGVjdWxlXzEiLCJjb21wb3NpdGlvbl8xIiwiYXRvbV8xIiwiY2FyZXRfMSIsInJhbmRvbUVsZW1lbnQiLCJrZXlzIiwiUGVyaW9kaWNUYWJsZSIsImVsZW1lbnRzIiwiTWF0aCIsInJhbmRvbSIsInJhbmRvbU51bWJlciIsIm1pbiIsIm1heCIsIm5vdEVxdWFsVG8iLCJyYW5kIiwiZ2VuZXJhdGVRdWVzdGlvbiIsInR5cGUiLCJxdWVzdGlvbiIsIm1vbGVjdWxlIiwicmFuZG9tTW9sZWN1bGUiLCJiYXNlIiwiZmFjdG9yIiwiTW9sZWN1bGUiLCJDb21wb3NpdGlvbiIsIlF1ZXN0aW9uIiwiZW1waXJpY2FsIiwicm91bmQiLCJudW1PZkZpcnN0IiwibnVtT2ZTZWNvbmQiLCJtdWx0aXBsZSIsImhpbGxTb3J0IiwidXBkYXRlQW5zd2VyRWxlbWVudCIsImFuc3dlckVsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNhcmV0UG9zIiwiZ2V0Q2FyZXRQb3NpdGlvbiIsImlubmVySFRNTCIsInJhbmdlIiwiY3JlYXRlUmFuZ2UiLCJzZWwiLCJ3aW5kb3ciLCJnZXRTZWxlY3Rpb24iLCJzZXRTdGFydCIsImdldFNlbGVjdGlvblN0YXJ0IiwiY29sbGFwc2UiLCJyZW1vdmVBbGxSYW5nZXMiLCJhZGRSYW5nZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiYW5zd2VyIiwiZGF0YXNldCIsImNvcnJlY3RBbnN3ZXIiLCJwcmV2aW91c0VudHJ5IiwiZXZlbnQiLCJrZXlDb2RlIiwicmVtb3ZlIiwiY29udGFpbnMiLCJwcm9tcHQiLCJzdHlsZSIsImRpc3BsYXkiLCJoeWRyb2dlbiIsIm94eWdlbiIsIm51bWJlciIsImdyb3VwIiwiY2FyYm9uIiwibml0cm9nZW4iLCJwaG9zcGhvcnVzIiwic3VsZnVyIiwiY2hsb3JpbmUiLCJpb2RpbmUiLCJncm91cGluZ18xIiwibWFzcyIsIkFycmF5IiwiY29tcCIsImVtcGlyaWNhbENvbXAiLCJmcm9tIiwic2ltcGxpZnkiLCJzb3J0IiwiYSIsImIiLCJ0b0xvd2VyQ2FzZSIsImZpbmQiLCJjb25zdGl0dWVudCIsInNwbGljZSIsInVuc2hpZnQiLCJhcnJheSIsIm1pbmltdW0iLCJtYXAiLCJmb3JFYWNoIiwibmV3Q29uIiwibmV3Q291bnQiLCJwdXNoIiwiZXZlcnkiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJub2RlX3dhbGsiLCJub2RlIiwiZnVuYyIsInJlc3VsdCIsImZpcnN0Q2hpbGQiLCJuZXh0U2libGluZyIsImFuY2hvck5vZGUiLCJub2RlVHlwZSIsInBhcmVudE5vZGUiLCJlbGVtIiwiY3VtX2xlbmd0aCIsImFuY2hvck9mZnNldCIsImV4dGVudE9mZnNldCIsIm5vZGVzX3RvX2ZpbmQiLCJleHRlbnROb2RlIiwiZm91bmQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0Es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QUFHd0wsRUFBS2xILGNBQWdCa0gsRUFBS0csV0FDM0IsSUFBSTNMLEVBQUksRUFBR0EsRUFBSSxFQUFHQSxJQUNac00sRUFBTXRNLEtBQ1JpTSxFQUFXak0sSUFBTXdMLEVBQUtsSCxZQUFZTSxVQUkxQ3FILEVBQVcsSUFBTWxFLEVBQUltRSxhQUNyQkQsRUFBVyxJQUFNbEUsRUFBSW9FLGFBR3pCLE9BQUdGLEVBQVcsSUFBTUEsRUFBVyxHQUN0QkEsRUFDRixDQUFDQSxFQUFXLEdBQUlBLEVBQVciLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsImltcG9ydCB7IENvbnN0aXR1ZW50IH0gZnJvbSBcIi4vY29uc3RpdHVlbnRcIjtcclxuaW1wb3J0IHsgQ29tcG9zaXRpb24gfSBmcm9tIFwiLi9jb21wb3NpdGlvblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdyb3VwaW5nIGV4dGVuZHMgQ29uc3RpdHVlbnQge1xyXG4gICAgY29tcG9zaXRpb246IENvbXBvc2l0aW9uO1xyXG4gICAgY29uc3RydWN0b3IoY29tcG9zaXRpb246IENvbXBvc2l0aW9uKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNvbXBvc2l0aW9uID0gY29tcG9zaXRpb247XHJcbiAgICB9XHJcbiAgICBnZXQgZm9ybXVsYSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvc2l0aW9uLmZvcm11bGE7XHJcbiAgICB9XHJcbiAgICBnZXQgbW9sYXJNYXNzKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9zaXRpb24ubW9sYXJNYXNzICogdGhpcy5jb3VudDtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuL2VudGl0eVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbnN0aXR1ZW50IGV4dGVuZHMgRW50aXR5IHtcclxuICAgIGNvdW50OiBudW1iZXI7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb3VudDogbnVtYmVyID0gMSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xyXG4gICAgfVxyXG4gICAgZ2V0IGZvcm11bGEoKTogc3RyaW5nIHtcclxuICAgICAgICB0aHJvdyBcIlN0cmluZyBmb3IgdGhpcyBvYmplY3Qgbm90IGRlZmluZWQuXCI7XHJcbiAgICB9XHJcbiAgICBnZXQgbW9sYXJNYXNzKCk6IG51bWJlciB7XHJcbiAgICAgICAgdGhyb3cgXCJNZXRob2QgZm9yIG1vbGFyIG1hc3Mgbm90IGRlZmluZWQuXCI7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBDb25zdGl0dWVudCB9IGZyb20gXCIuL2NvbnN0aXR1ZW50XCI7XHJcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tIFwiLi9lbGVtZW50XCI7XHJcbmltcG9ydCB7IHN1YnNjcmlwdGlmeSB9IGZyb20gXCIuLi9mb3JtYXR0aW5nXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQXRvbSBleHRlbmRzIENvbnN0aXR1ZW50IHtcclxuICAgIGVsZW1lbnQ6IEVsZW1lbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50OiBFbGVtZW50LCBjb3VudDogbnVtYmVyID0gMSkge1xyXG4gICAgICAgIHN1cGVyKGNvdW50KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgfVxyXG4gICAgZ2V0IGZvcm11bGEoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb3VudCA9PSAxID8gdGhpcy5lbGVtZW50LnN5bWJvbCA6IHRoaXMuZWxlbWVudC5zeW1ib2wgKyBzdWJzY3JpcHRpZnkodGhpcy5jb3VudC50b1N0cmluZygpKTtcclxuICAgIH1cclxuICAgIGdldCBtb2xhck1hc3MoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmF0b21pY01hc3MgKiB0aGlzLmNvdW50O1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGVudW0gQ2hhcmFjdGVyU2V0cyB7XHJcbiAgICBub3JtYWwgPSBcIjAxMjM0NTY3ODkrLT0oKVwiLFxyXG4gICAgc3Vic2NyaXB0ID0gXCLigoDigoHigoLigoPigoTigoXigobigofigojigonigorigovigozigo3igo5cIixcclxuICAgIHN1cGVyc2NyaXB0ID0gXCLigbDCucKywrPigbTigbXigbbigbfigbjigbnigbrigbvigbzigb3igb5cIixcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN1YnNjcmlwdGlmeShzdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1swLTldfFxcK3w9XFwofFxcKS9nLCAobWF0Y2gpID0+IENoYXJhY3RlclNldHMuc3Vic2NyaXB0W0NoYXJhY3RlclNldHMubm9ybWFsLmluZGV4T2YobWF0Y2gpXSk7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1pZnkoc3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC/igoB84oKBfOKCgnzigoN84oKEfOKChXzigoZ84oKHfOKCiHzigol84oKKfOKCi3zigox84oKNfOKCji9nLCAobWF0Y2gpID0+IENoYXJhY3RlclNldHMubm9ybWFsW0NoYXJhY3RlclNldHMuc3Vic2NyaXB0LmluZGV4T2YobWF0Y2gpXSkucmVwbGFjZSgv4oGwfMK5fMKyfMKzfOKBtHzigbV84oG2fOKBt3zigbh84oG5fOKBunzigbt84oG8fOKBvXzigb4vLCAobWF0Y2gpID0+IENoYXJhY3RlclNldHMubm9ybWFsW0NoYXJhY3RlclNldHMuc3VwZXJzY3JpcHQuaW5kZXhPZihtYXRjaCldKTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gaGFzU3Vic2NyaXB0KHN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gc3RyaW5nLm1hdGNoKC/igoB84oKBfOKCgnzigoN84oKEfOKChXzigoZ84oKHfOKCiHzigol84oKKfOKCi3zigox84oKNfOKCji9nKSAhPSBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmljaGlmeShzdHJpbmc6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcclxuICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgIHZhciBjdXJyZW50U3RyaW5nID0gXCJcIjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHN0cmluZ1tpXSA9PSBcIiRcIikge1xyXG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobm9ybWlmeShjdXJyZW50U3RyaW5nKSkpO1xyXG4gICAgICAgICAgICBjdXJyZW50U3RyaW5nID0gXCJcIjtcclxuICAgICAgICAgICAgdmFyIG5ld0VsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgLy9UaGUgY29tbWFuZCAtIGV4OiBcIiRmcmFjKDUsMlwiXHJcbiAgICAgICAgICAgIHZhciBjb21tYW5kID0gc3RyaW5nLnN1YnN0cmluZyhpICsgMSkuc3BsaXQoXCIpXCIpWzBdO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb21tYW5kKTtcclxuXHJcbiAgICAgICAgICAgIC8vVGhlIGFyZ3MgLSBleDogW1wiNVwiLCBcIjJcIl1cclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBjb21tYW5kLnNwbGl0KFwiKFwiKVsxXS5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyZ3MpO1xyXG5cclxuICAgICAgICAgICAgLy9Db21hbmQgbmFtZSAtIGV4OiBcImZyYWNcIlxyXG4gICAgICAgICAgICB2YXIgbmFtZSA9IGNvbW1hbmQuc3BsaXQoXCIoXCIpWzBdO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhuYW1lKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZnJhY1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQgPSBuZXdGcmFjdGlvbihhcmdzWzBdLCBhcmdzWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobmV3RWxlbWVudCk7XHJcbiAgICAgICAgICAgIGkgKz0gY29tbWFuZC5sZW5ndGggKyAxO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaGFzU3Vic2NyaXB0KHN0cmluZ1tpXSkpIHtcclxuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG5vcm1pZnkoY3VycmVudFN0cmluZykpKTtcclxuICAgICAgICAgICAgY3VycmVudFN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2hhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdWJcIik7XHJcbiAgICAgICAgICAgIGNoYXIudGV4dENvbnRlbnQgPSBub3JtaWZ5KHN0cmluZ1tpXSk7XHJcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChjaGFyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50U3RyaW5nICs9IHN0cmluZ1tpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkaXYuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobm9ybWlmeShjdXJyZW50U3RyaW5nKSkpO1xyXG4gICAgcmV0dXJuIGRpdjtcclxufVxyXG5cclxuZnVuY3Rpb24gbmV3RnJhY3Rpb24odG9wOiBzdHJpbmcsIGJvdHRvbTogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xyXG4gICAgdmFyIGZyYWNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZnJhY0Rpdi5jbGFzc0xpc3QuYWRkKFwiZnJhY3Rpb25cIik7XHJcblxyXG4gICAgdmFyIHRvcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICB0b3BFbC50ZXh0Q29udGVudCA9IHRvcDtcclxuICAgIHZhciBib3R0b21FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgYm90dG9tRWwudGV4dENvbnRlbnQgPSBib3R0b207XHJcblxyXG4gICAgZnJhY0Rpdi5hcHBlbmRDaGlsZCh0b3BFbCk7XHJcbiAgICBmcmFjRGl2LmFwcGVuZENoaWxkKGJvdHRvbUVsKTtcclxuXHJcbiAgICByZXR1cm4gZnJhY0RpdjtcclxufSIsImltcG9ydCB7IFF1ZXN0aW9uIH0gZnJvbSBcIi4vcXVlc3Rpb25cIjtcclxuaW1wb3J0IHsgUGVyaW9kaWNUYWJsZSB9IGZyb20gXCIuL3BlcmlvZGljLXRhYmxlXCI7XHJcbmltcG9ydCB7IEVsZW1lbnQgfSBmcm9tIFwiLi9jaGVtaXN0cnkvZWxlbWVudFwiO1xyXG5pbXBvcnQgeyBNb2xlY3VsZSB9IGZyb20gXCIuL2NoZW1pc3RyeS9tb2xlY3VsZVwiO1xyXG5pbXBvcnQgeyBDb21wb3NpdGlvbiB9IGZyb20gXCIuL2NoZW1pc3RyeS9jb21wb3NpdGlvblwiO1xyXG5pbXBvcnQgeyBBdG9tIH0gZnJvbSBcIi4vY2hlbWlzdHJ5L2F0b21cIjtcclxuaW1wb3J0IHsgc3Vic2NyaXB0aWZ5LCByaWNoaWZ5IH0gZnJvbSBcIi4vZm9ybWF0dGluZ1wiO1xyXG5pbXBvcnQgeyBnZXRDYXJldFBvc2l0aW9uLCAgZ2V0U2VsZWN0aW9uU3RhcnQgfSBmcm9tIFwiLi9jYXJldFwiO1xyXG5cclxuZnVuY3Rpb24gcmFuZG9tRWxlbWVudCgpOiBFbGVtZW50IHtcclxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoUGVyaW9kaWNUYWJsZS5lbGVtZW50cylcclxuICAgIHJldHVybiBQZXJpb2RpY1RhYmxlLmVsZW1lbnRzW2tleXNba2V5cy5sZW5ndGggKiBNYXRoLnJhbmRvbSgpIDw8IDBdXTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIHJhbmRvbU51bWJlcihtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIG5vdEVxdWFsVG8/OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgdmFyIHJhbmQgPSBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47XHJcbiAgICBpZiAocmFuZCA9PSBub3RFcXVhbFRvKSB7XHJcbiAgICAgICAgcmV0dXJuIHJhbmRvbU51bWJlcihtaW4sbWF4LG5vdEVxdWFsVG8pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJhbmQ7XHJcbn1cclxuXHJcbi8vUXVlc3Rpb25zXHJcbmZ1bmN0aW9uIHJhbmRvbU1vbGVjdWxlKCk6IE1vbGVjdWxlIHtcclxuICAgIHZhciBiYXNlID0gcmFuZG9tTnVtYmVyKDEsNSkgPDwgMDtcclxuICAgIHZhciBmYWN0b3IgPSByYW5kb21OdW1iZXIoMSw2KSA8PCAwO1xyXG4gICAgY29uc29sZS5sb2coXCJCYXNlOiBcIiArIGJhc2UgKyBcIiwgRmFjdG9yOiBcIiArIGZhY3Rvcik7XHJcbiAgICB2YXIgbW9sZWN1bGUgPSBuZXcgTW9sZWN1bGUobmV3IENvbXBvc2l0aW9uKFtuZXcgQXRvbShyYW5kb21FbGVtZW50KCksYmFzZSksIG5ldyBBdG9tKHJhbmRvbUVsZW1lbnQoKSwgYmFzZSAqIGZhY3RvcildKSk7XHJcbiAgICBpZiAoKG1vbGVjdWxlLmNvbXBvc2l0aW9uWzBdIGFzIEF0b20pLmVsZW1lbnQubmFtZSA9PSAobW9sZWN1bGUuY29tcG9zaXRpb25bMV0gYXMgQXRvbSkuZWxlbWVudC5uYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHJhbmRvbU1vbGVjdWxlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBtb2xlY3VsZTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVRdWVzdGlvbih0eXBlOiBcImVtcGlyaWNhbC10by1jaGVtaWNhbFwiIHwgXCJtYXNzLXBlcmNlbnQtdG8tZW1waXJpY2FsXCIgfCBcIm1hc3MtcGVyY2VudC10by1jaGVtaWNhbFwiIHwgXCJ0d28tbWFzcy1jb21wb3NpdGlvbnMtdG8tY2hlbWljYWxcIik6IFF1ZXN0aW9uIHtcclxuICAgIHZhciBtb2xlY3VsZSA9IHJhbmRvbU1vbGVjdWxlKCk7XHJcbiAgICB2YXIgcXVlc3Rpb246IFF1ZXN0aW9uO1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBcImVtcGlyaWNhbC10by1jaGVtaWNhbFwiOlxyXG4gICAgICAgICAgICBxdWVzdGlvbiA9IG5ldyBRdWVzdGlvbihcIldoYXQgaXMgdGhlIGNoZW1pY2FsIGZvcm11bGEgb2YgYSBtb2xlY3VsZSB3aXRoIHRoZSBlbXBpcmljYWwgZm9ybXVsYSBcIiArIG1vbGVjdWxlLmNvbXBvc2l0aW9uLmVtcGlyaWNhbC5mb3JtdWxhICsgXCIgYW5kIGEgbW9sYXIgbWFzcyBvZiAkZnJhYyhcIiArIChNYXRoLnJvdW5kKG1vbGVjdWxlLm1vbGFyTWFzcyAqIDEwMDApLzEwMDApICsgXCJnLG1vbCk/XCIsIG1vbGVjdWxlLmZvcm11bGEpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwibWFzcy1wZXJjZW50LXRvLWNoZW1pY2FsXCI6XHJcbiAgICAgICAgICAgIHF1ZXN0aW9uID0gbmV3IFF1ZXN0aW9uKFwiQSBtb2xlY3VsZSBvZiBcIiArIChtb2xlY3VsZS5jb21wb3NpdGlvblswXSBhcyBBdG9tKS5lbGVtZW50Lm5hbWUgKyBcIiBhbmQgXCIgKyAobW9sZWN1bGUuY29tcG9zaXRpb25bMV0gYXMgQXRvbSkuZWxlbWVudC5uYW1lICsgXCIgaXMgbWFkZSB1cCBvZiBcIiArIChNYXRoLnJvdW5kKChtb2xlY3VsZS5jb21wb3NpdGlvblswXS5tb2xhck1hc3MgLyBtb2xlY3VsZS5tb2xhck1hc3MpICogMTAwMCkvMTApICsgXCIlIFwiICsgKG1vbGVjdWxlLmNvbXBvc2l0aW9uWzBdIGFzIEF0b20pLmVsZW1lbnQubmFtZSArIFwiLCBhbmQgaXQgaGFzIGEgbW9sYXIgbWFzcyBvZiAkZnJhYyhcIiArIChNYXRoLnJvdW5kKG1vbGVjdWxlLm1vbGFyTWFzcyAqIDEwMDApLzEwMDApICsgXCJnLG1vbCkuIFdoYXQgaXMgaXRzIG1vbGVjdWxhciBmb3JtdWxhP1wiLCBtb2xlY3VsZS5mb3JtdWxhKVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwibWFzcy1wZXJjZW50LXRvLWVtcGlyaWNhbFwiOlxyXG4gICAgICAgICAgICBxdWVzdGlvbiA9IG5ldyBRdWVzdGlvbihcIkEgbW9sZWN1bGUgb2YgXCIgKyAobW9sZWN1bGUuY29tcG9zaXRpb25bMF0gYXMgQXRvbSkuZWxlbWVudC5uYW1lICsgXCIgYW5kIFwiICsgKG1vbGVjdWxlLmNvbXBvc2l0aW9uWzFdIGFzIEF0b20pLmVsZW1lbnQubmFtZSArIFwiIGlzIG1hZGUgdXAgb2YgXCIgKyAoTWF0aC5yb3VuZCgobW9sZWN1bGUuY29tcG9zaXRpb25bMF0ubW9sYXJNYXNzIC8gbW9sZWN1bGUubW9sYXJNYXNzKSAqIDEwMDApLzEwKSArIFwiJSBcIiArIChtb2xlY3VsZS5jb21wb3NpdGlvblswXSBhcyBBdG9tKS5lbGVtZW50Lm5hbWUgKyBcIi4gV2hhdCBpcyBpdHMgZW1waXJpY2FsIGZvcm11bGE/XCIsIG1vbGVjdWxlLmNvbXBvc2l0aW9uLmVtcGlyaWNhbC5mb3JtdWxhKVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwidHdvLW1hc3MtY29tcG9zaXRpb25zLXRvLWNoZW1pY2FsXCI6XHJcbiAgICAgICAgICAgIHZhciBudW1PZkZpcnN0ID0gcmFuZG9tTnVtYmVyKDEsNSkgPDwgMDtcclxuICAgICAgICAgICAgdmFyIG51bU9mU2Vjb25kID0gcmFuZG9tTnVtYmVyKDEsNSxudW1PZkZpcnN0KSA8PCAwO1xyXG4gICAgICAgICAgICB2YXIgbXVsdGlwbGUgPSBNYXRoLnJhbmRvbSgpICsgMTtcclxuICAgICAgICAgICAgbW9sZWN1bGUuY29tcG9zaXRpb24uaGlsbFNvcnQoKTtcclxuICAgICAgICAgICAgcXVlc3Rpb24gPSBuZXcgUXVlc3Rpb24oXCJMZXQncyBzdXBwb3NlIHRoYXQgXCIgKyAobW9sZWN1bGUuY29tcG9zaXRpb25bMF0gYXMgQXRvbSkuZWxlbWVudC5uYW1lICsgXCIgYW5kIFwiICsgKG1vbGVjdWxlLmNvbXBvc2l0aW9uWzFdIGFzIEF0b20pLmVsZW1lbnQubmFtZSArIFwiIGNvbWUgdG9nZXRoZXIgdG8gZm9ybSB0d28gZGlmZmVyZW50IGNvbXBvdW5kcy4gQ29tcG91bmQgMSBoYXMgXCIgKyBNYXRoLnJvdW5kKChtb2xlY3VsZS5jb21wb3NpdGlvblswXSBhcyBBdG9tKS5lbGVtZW50LmF0b21pY01hc3MgKiBudW1PZkZpcnN0ICogbXVsdGlwbGUgKiAxMDApLzEwMCArIFwiZyBvZiBcIiArIChtb2xlY3VsZS5jb21wb3NpdGlvblswXSBhcyBBdG9tKS5lbGVtZW50Lm5hbWUgKyBcIiBhbmQgXCIgKyBNYXRoLnJvdW5kKChtb2xlY3VsZS5jb21wb3NpdGlvblsxXSBhcyBBdG9tKS5lbGVtZW50LmF0b21pY01hc3MgKiBudW1PZlNlY29uZCAqIG11bHRpcGxlICogMTAwKS8xMDAgKyBcImcgb2YgXCIgKyAobW9sZWN1bGUuY29tcG9zaXRpb25bMV0gYXMgQXRvbSkuZWxlbWVudC5uYW1lICsgXCIuIENvbXBvdW5kIDIgaGFzIFwiICsgTWF0aC5yb3VuZChtb2xlY3VsZS5jb21wb3NpdGlvblswXS5tb2xhck1hc3MgKiBtdWx0aXBsZSAqIDEwMCkvMTAwICsgXCJnIG9mIFwiICsgKG1vbGVjdWxlLmNvbXBvc2l0aW9uWzBdIGFzIEF0b20pLmVsZW1lbnQubmFtZSArIFwiIGFuZCBcIiArIE1hdGgucm91bmQobW9sZWN1bGUuY29tcG9zaXRpb25bMV0ubW9sYXJNYXNzICogbXVsdGlwbGUgKiAxMDApLzEwMCArIFwiZyBvZiBcIiArIChtb2xlY3VsZS5jb21wb3NpdGlvblsxXSBhcyBBdG9tKS5lbGVtZW50Lm5hbWUgKyBcIi4gSWYgdGhlIGNoZW1pY2FsIGZvcm11bGEgb2YgQ29tcG91bmQgMSBpcyBcIiArIChtb2xlY3VsZS5jb21wb3NpdGlvblswXSBhcyBBdG9tKS5lbGVtZW50LnN5bWJvbCArIChudW1PZkZpcnN0ID09IDEgPyBcIlwiIDogc3Vic2NyaXB0aWZ5KG51bU9mRmlyc3QudG9TdHJpbmcoKSkpICsgKG1vbGVjdWxlLmNvbXBvc2l0aW9uWzFdIGFzIEF0b20pLmVsZW1lbnQuc3ltYm9sICsgKG51bU9mU2Vjb25kID09IDEgPyBcIlwiIDogc3Vic2NyaXB0aWZ5KG51bU9mU2Vjb25kLnRvU3RyaW5nKCkpKSArIFwiLCB0aGVuIHdoYXQgaXMgdGhlIGNoZW1pY2FsIGZvcm11bGEgb2YgQ29tcG91bmQgMj9cIiwgbW9sZWN1bGUuZm9ybXVsYSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcXVlc3Rpb247XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbigpe1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGVja0Fuc3dlclwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZTogRXZlbnQpe1xyXG4gICAgICAgIHZhciBhbnN3ZXIgPSBzdWJzY3JpcHRpZnkoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbnN3ZXJcIikudGV4dENvbnRlbnQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGFuc3dlcik7XHJcbiAgICAgICAgaWYgKGFuc3dlciA9PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuc3dlclwiKS5kYXRhc2V0LmNvcnJlY3RBbnN3ZXIpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmZWVkYmFja1wiKS50ZXh0Q29udGVudCA9IFwiQ29ycmVjdCFcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZlZWRiYWNrXCIpLnRleHRDb250ZW50ID0gXCJJbmNvcnJlY3QuXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIHZhciBwcmV2aW91c0VudHJ5OiBcIm5vcm1hbFwiIHwgXCJzdWJzY3JpcHRcIiA9IFwibm9ybWFsXCI7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGZ1bmN0aW9uKGV2ZW50OiBLZXlib2FyZEV2ZW50KXtcclxuICAgICAgICBpZiAoNDggPD0gZXZlbnQua2V5Q29kZSAmJiBldmVudC5rZXlDb2RlIDw9IDU3ICYmIHByZXZpb3VzRW50cnkgPT0gXCJub3JtYWxcIikge1xyXG4gICAgICAgICAgICBwcmV2aW91c0VudHJ5ID0gXCJzdWJzY3JpcHRcIjtcclxuICAgICAgICAgICAgdXBkYXRlQW5zd2VyRWxlbWVudCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoNjUgPD0gZXZlbnQua2V5Q29kZSAmJiBldmVudC5rZXlDb2RlIDw9IDkwICYmIHByZXZpb3VzRW50cnkgPT0gXCJzdWJzY3JpcHRcIikge1xyXG4gICAgICAgICAgICBwcmV2aW91c0VudHJ5ID0gXCJub3JtYWxcIjtcclxuICAgICAgICAgICAgdXBkYXRlQW5zd2VyRWxlbWVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWVTb2x1dGlvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZlZWRiYWNrXCIpLmlubmVySFRNTCA9IFwiU29sdXRpb246IFwiICsgcmljaGlmeShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuc3dlclwiKS5kYXRhc2V0LmNvcnJlY3RBbnN3ZXIpLmlubmVySFRNTDtcclxuICAgIH0pO1xyXG5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicXVlc3Rpb25TZWxlY3RcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmICgodGhpcyBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWUgIT0gXCJcIikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYXRlUXVlc3Rpb25cIikuY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYXRlUXVlc3Rpb25cIikuY2xhc3NMaXN0LmFkZChcImltcG9ydGFudFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYXRlUXVlc3Rpb25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYXRlUXVlc3Rpb25cIikuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZWRcIikpe1xyXG4gICAgICAgICAgICB2YXIgcXVlc3Rpb24gPSBnZW5lcmF0ZVF1ZXN0aW9uKChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInF1ZXN0aW9uU2VsZWN0XCIpIGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZSBhcyBcImVtcGlyaWNhbC10by1jaGVtaWNhbFwiIHwgXCJtYXNzLXBlcmNlbnQtdG8tY2hlbWljYWxcIiB8IFwidHdvLW1hc3MtY29tcG9zaXRpb25zLXRvLWNoZW1pY2FsXCIpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb21wdFwiKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb21wdFwiKS5hcHBlbmRDaGlsZChyaWNoaWZ5KHF1ZXN0aW9uLnByb21wdCkpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFuc3dlclwiKS5kYXRhc2V0LmNvcnJlY3RBbnN3ZXIgPSBxdWVzdGlvbi5hbnN3ZXI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInF1ZXN0aW9uXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2VuZXJhdGVRdWVzdGlvblwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiaW1wb3J0YW50XCIpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZlZWRiYWNrXCIpLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbnN3ZXJcIikuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVBbnN3ZXJFbGVtZW50KCkge1xyXG4gICAgdmFyIGFuc3dlckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbnN3ZXJcIikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgdmFyIGNhcmV0UG9zOiBudW1iZXIgPSBnZXRDYXJldFBvc2l0aW9uKGFuc3dlckVsZW1lbnQpWzBdO1xyXG5cclxuICAgIGFuc3dlckVsZW1lbnQuaW5uZXJIVE1MID0gcmljaGlmeShzdWJzY3JpcHRpZnkoYW5zd2VyRWxlbWVudC50ZXh0Q29udGVudCkpLmlubmVySFRNTDtcclxuXHJcbiAgICAvL0NhcmV0IHN0dWZmXHJcbiAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xyXG4gICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuICAgIHJhbmdlLnNldFN0YXJ0KGdldFNlbGVjdGlvblN0YXJ0KCksIGNhcmV0UG9zKTtcclxuICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpO1xyXG4gICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgc2VsLmFkZFJhbmdlKHJhbmdlKTtcclxufVxyXG5cclxuY29uc29sZS5sb2cobmV3IENvbXBvc2l0aW9uKFtuZXcgQXRvbShQZXJpb2RpY1RhYmxlLmVsZW1lbnRzLmh5ZHJvZ2VuLDIpLCBuZXcgQXRvbShQZXJpb2RpY1RhYmxlLmVsZW1lbnRzLm94eWdlbildKSkiLCJpbXBvcnQgeyBoYXNTdWJzY3JpcHQsIG5vcm1pZnkgfSBmcm9tIFwiLi9mb3JtYXR0aW5nXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUXVlc3Rpb24ge1xyXG4gICAgcHJvbXB0OiBzdHJpbmc7XHJcbiAgICBhbnN3ZXI6IHN0cmluZztcclxuICAgIGNvbnN0cnVjdG9yKHByb21wdDogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMucHJvbXB0ID0gcHJvbXB0O1xyXG4gICAgICAgIHRoaXMuYW5zd2VyID0gYW5zd2VyO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gXCIuL2NoZW1pc3RyeS9lbGVtZW50XCJcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRWxlbWVudENvbGxlY3Rpb24ge1xyXG4gICAgW2VsZW1lbnQ6IHN0cmluZ106IEVsZW1lbnQ7XHJcbiAgICBoeWRyb2dlbj86IEVsZW1lbnQ7XHJcbiAgICBoZWxpdW0/OiBFbGVtZW50O1xyXG4gICAgbGl0aGl1bT86IEVsZW1lbnQ7XHJcbiAgICBiZXJ5bGxpdW0/OiBFbGVtZW50O1xyXG4gICAgYm9yb24/OiBFbGVtZW50O1xyXG4gICAgY2FyYm9uPzogRWxlbWVudDtcclxuICAgIG5pdHJvZ2VuPzogRWxlbWVudDtcclxuICAgIG94eWdlbj86IEVsZW1lbnQ7XHJcbiAgICBmbHVvcmluZT86IEVsZW1lbnQ7XHJcbiAgICBuZW9uPzogRWxlbWVudDtcclxuICAgIHNvZGl1bT86IEVsZW1lbnQ7XHJcbiAgICBtYWduZXNpdW0/OiBFbGVtZW50O1xyXG4gICAgYWx1bWludW0/OiBFbGVtZW50O1xyXG4gICAgc2lsaWNvbj86IEVsZW1lbnQ7XHJcbiAgICBwaG9zcGhvcnVzPzogRWxlbWVudDtcclxuICAgIHN1bGZ1cj86IEVsZW1lbnQ7XHJcbiAgICBjaGxvcmluZT86IEVsZW1lbnQ7XHJcbiAgICBhcmdvbj86IEVsZW1lbnQ7XHJcbiAgICBwb3Rhc3NpdW0/OiBFbGVtZW50O1xyXG4gICAgY2FsY2l1bT86IEVsZW1lbnQ7XHJcbiAgICBzY2FuZGl1bT86IEVsZW1lbnQ7XHJcbiAgICB0aXRhbml1bT86IEVsZW1lbnQ7XHJcbiAgICB2YW5hZGl1bT86IEVsZW1lbnQ7XHJcbiAgICBjaHJvbWl1bT86IEVsZW1lbnQ7XHJcbiAgICBtYW5nYW5lc2U/OiBFbGVtZW50O1xyXG4gICAgaXJvbj86IEVsZW1lbnQ7XHJcbiAgICBjb2JhbHQ/OiBFbGVtZW50O1xyXG4gICAgbmlja2VsPzogRWxlbWVudDtcclxuICAgIGNvcHBlcj86IEVsZW1lbnQ7XHJcbiAgICB6aW5jPzogRWxlbWVudDtcclxuICAgIGdhbGxpdW0/OiBFbGVtZW50O1xyXG4gICAgZ2VybWFuaXVtPzogRWxlbWVudDtcclxuICAgIGFyc2VuaWM/OiBFbGVtZW50O1xyXG4gICAgc2VsZW5pdW0/OiBFbGVtZW50O1xyXG4gICAgYnJvbWluZT86IEVsZW1lbnQ7XHJcbiAgICBrcnlwdG9uPzogRWxlbWVudDtcclxuICAgIHJ1YmlkaXVtPzogRWxlbWVudDtcclxuICAgIHN0cm9udGl1bT86IEVsZW1lbnQ7XHJcbiAgICB5dHRyaXVtPzogRWxlbWVudDtcclxuICAgIHppcmNvbml1bT86IEVsZW1lbnQ7XHJcbiAgICBuaW9iaXVtPzogRWxlbWVudDtcclxuICAgIG1vbHliZGVudW0/OiBFbGVtZW50O1xyXG4gICAgdGVjaG5ldGl1bT86IEVsZW1lbnQ7XHJcbiAgICBydXRoZW5pdW0/OiBFbGVtZW50O1xyXG4gICAgcmhvZGl1bT86IEVsZW1lbnQ7XHJcbiAgICBwYWxsYWRpdW0/OiBFbGVtZW50O1xyXG4gICAgc2lsdmVyPzogRWxlbWVudDtcclxuICAgIGNhZG1pdW0/OiBFbGVtZW50O1xyXG4gICAgaW5kaXVtPzogRWxlbWVudDtcclxuICAgIHRpbj86IEVsZW1lbnQ7XHJcbiAgICBhbnRpbW9ueT86IEVsZW1lbnQ7XHJcbiAgICB0ZWxsdXJpdW0/OiBFbGVtZW50O1xyXG4gICAgaW9kaW5lPzogRWxlbWVudDtcclxuICAgIHhlbm9uPzogRWxlbWVudDtcclxuICAgIGNlc2l1bT86IEVsZW1lbnQ7XHJcbiAgICBiYXJpdW0/OiBFbGVtZW50O1xyXG4gICAgbGFudGhhbnVtPzogRWxlbWVudDtcclxuICAgIGNlcml1bT86IEVsZW1lbnQ7XHJcbiAgICBwcmFzZW9keW1pdW0/OiBFbGVtZW50O1xyXG4gICAgbmVvZHltaXVtPzogRWxlbWVudDtcclxuICAgIHByb21ldGhpdW0/OiBFbGVtZW50O1xyXG4gICAgc2FtYXJpdW0/OiBFbGVtZW50O1xyXG4gICAgZXVyb3BpdW0/OiBFbGVtZW50O1xyXG4gICAgZ2Fkb2xpbml1bT86IEVsZW1lbnQ7XHJcbiAgICB0ZXJiaXVtPzogRWxlbWVudDtcclxuICAgIGR5c3Byb3NpdW0/OiBFbGVtZW50O1xyXG4gICAgaG9sbWl1bT86IEVsZW1lbnQ7XHJcbiAgICBlcmJpdW0/OiBFbGVtZW50O1xyXG4gICAgdGh1bGl1bT86IEVsZW1lbnQ7XHJcbiAgICB5dHRlcmJpdW0/OiBFbGVtZW50O1xyXG4gICAgbHV0ZXRpdW0/OiBFbGVtZW50O1xyXG4gICAgaGFmbml1bT86IEVsZW1lbnQ7XHJcbiAgICB0YW50YWx1bT86IEVsZW1lbnQ7XHJcbiAgICB0dW5nc3Rlbj86IEVsZW1lbnQ7XHJcbiAgICByaGVuaXVtPzogRWxlbWVudDtcclxuICAgIG9zbWl1bT86IEVsZW1lbnQ7XHJcbiAgICBpcmlkaXVtPzogRWxlbWVudDtcclxuICAgIHBsYXRpbnVtPzogRWxlbWVudDtcclxuICAgIGdvbGQ/OiBFbGVtZW50O1xyXG4gICAgbWVyY3VyeT86IEVsZW1lbnQ7XHJcbiAgICB0aGFsbGl1bT86IEVsZW1lbnQ7XHJcbiAgICBsZWFkPzogRWxlbWVudDtcclxuICAgIGJpc211dGg/OiBFbGVtZW50O1xyXG4gICAgcG9sb25pdW0/OiBFbGVtZW50O1xyXG4gICAgYXN0YXRpbmU/OiBFbGVtZW50O1xyXG4gICAgcmFkb24/OiBFbGVtZW50O1xyXG4gICAgZnJhbmNpdW0/OiBFbGVtZW50O1xyXG4gICAgcmFkaXVtPzogRWxlbWVudDtcclxuICAgIGFjdGluaXVtPzogRWxlbWVudDtcclxuICAgIHRob3JpdW0/OiBFbGVtZW50O1xyXG4gICAgcHJvdGFjdGluaXVtPzogRWxlbWVudDtcclxuICAgIHVyYW5pdW0/OiBFbGVtZW50O1xyXG4gICAgbmVwdHVuaXVtPzogRWxlbWVudDtcclxuICAgIHBsdXRvbml1bT86IEVsZW1lbnQ7XHJcbiAgICBhbWVyaWNpdW0/OiBFbGVtZW50O1xyXG4gICAgY3VyaXVtPzogRWxlbWVudDtcclxuICAgIGJlcmtlbGl1bT86IEVsZW1lbnQ7XHJcbiAgICBjYWxpZm9ybml1bT86IEVsZW1lbnQ7XHJcbiAgICBlaW5zdGVpbml1bT86IEVsZW1lbnQ7XHJcbiAgICBmZXJtaXVtPzogRWxlbWVudDtcclxuICAgIG1lbmRlbGV2aXVtPzogRWxlbWVudDtcclxuICAgIG5vYmVsaXVtPzogRWxlbWVudDtcclxuICAgIGxhd3JlbmNpdW0/OiBFbGVtZW50O1xyXG4gICAgcnV0aGVyZm9yZGl1bT86IEVsZW1lbnQ7XHJcbiAgICBkdWJuaXVtPzogRWxlbWVudDtcclxuICAgIHNlYWJvcmdpdW0/OiBFbGVtZW50O1xyXG4gICAgYm9ocml1bT86IEVsZW1lbnQ7XHJcbiAgICBoYXNzaXVtPzogRWxlbWVudDtcclxuICAgIG1laXRuZXJpdW0/OiBFbGVtZW50O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUGVyaW9kaWNUYWJsZSB7XHJcbiAgICBzdGF0aWMgZ2V0IGVsZW1lbnRzKCk6IEVsZW1lbnRDb2xsZWN0aW9uIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBoeWRyb2dlbjoge1xyXG4gICAgICAgICAgICAgICAgc3ltYm9sOiBcIkhcIixcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiaHlkcm9nZW5cIixcclxuICAgICAgICAgICAgICAgIGF0b21pY01hc3M6IDEuMDA4LFxyXG4gICAgICAgICAgICAgICAgbnVtYmVyOiAxLFxyXG4gICAgICAgICAgICAgICAgZ3JvdXA6IDFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FyYm9uOiB7XHJcbiAgICAgICAgICAgICAgICBzeW1ib2w6IFwiQ1wiLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJjYXJib25cIixcclxuICAgICAgICAgICAgICAgIGF0b21pY01hc3M6IDEyLjAxMSxcclxuICAgICAgICAgICAgICAgIG51bWJlcjogNlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBuaXRyb2dlbjoge1xyXG4gICAgICAgICAgICAgICAgc3ltYm9sOiBcIk5cIixcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwibml0cm9nZW5cIixcclxuICAgICAgICAgICAgICAgIGF0b21pY01hc3M6IDE0LjAwNyxcclxuICAgICAgICAgICAgICAgIG51bWJlcjogN1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBveHlnZW46IHtcclxuICAgICAgICAgICAgICAgIHN5bWJvbDogXCJPXCIsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIm94eWdlblwiLFxyXG4gICAgICAgICAgICAgICAgYXRvbWljTWFzczogMTUuOTk5LFxyXG4gICAgICAgICAgICAgICAgbnVtYmVyOiA4XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBob3NwaG9ydXM6IHtcclxuICAgICAgICAgICAgICAgIHN5bWJvbDogXCJQXCIsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcInBob3NwaG9ydXNcIixcclxuICAgICAgICAgICAgICAgIGF0b21pY01hc3M6IDMwLjk3NCxcclxuICAgICAgICAgICAgICAgIG51bWJlcjogMTVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VsZnVyOiB7XHJcbiAgICAgICAgICAgICAgICBzeW1ib2w6IFwiU1wiLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJzdWxmdXJcIixcclxuICAgICAgICAgICAgICAgIGF0b21pY01hc3M6IDMyLjA2LFxyXG4gICAgICAgICAgICAgICAgbnVtYmVyOiAxNlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGxvcmluZToge1xyXG4gICAgICAgICAgICAgICAgc3ltYm9sOiBcIkNsXCIsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNobG9yaW5lXCIsXHJcbiAgICAgICAgICAgICAgICBhdG9taWNNYXNzOiAzNS40NSxcclxuICAgICAgICAgICAgICAgIG51bWJlcjogMTdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaW9kaW5lOiB7XHJcbiAgICAgICAgICAgICAgICBzeW1ib2w6IFwiSVwiLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJpb2RpbmVcIixcclxuICAgICAgICAgICAgICAgIGF0b21pY01hc3M6IDEyNi45LFxyXG4gICAgICAgICAgICAgICAgbnVtYmVyOiA1M1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEdyb3VwaW5nIH0gZnJvbSBcIi4vZ3JvdXBpbmdcIjtcclxuXHJcbmltcG9ydCB7IENvbnN0aXR1ZW50IH0gZnJvbSBcIi4vY29uc3RpdHVlbnRcIjtcclxuaW1wb3J0IHsgQ29tcG9zaXRpb24gfSBmcm9tIFwiLi9jb21wb3NpdGlvblwiO1xyXG5pbXBvcnQgeyBBdG9tIH0gZnJvbSBcIi4vYXRvbVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1vbGVjdWxlIGV4dGVuZHMgR3JvdXBpbmcge1xyXG4gICAgY29uc3RydWN0b3IoY29tcG9zaXRpb246IENvbXBvc2l0aW9uKSB7XHJcbiAgICAgICAgc3VwZXIoY29tcG9zaXRpb24pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ3JlYXRlZCBuZXcgbW9sZWN1bGUgd2l0aCBmb3JtdWxhIFwiICsgdGhpcy5mb3JtdWxhKTtcclxuICAgIH1cclxuICAgIGdldCBmb3JtdWxhKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY291bnQgPT0gMSA/IHN1cGVyLmZvcm11bGEgOiB0aGlzLmNvdW50LnRvU3RyaW5nKCkgKyBzdXBlci5mb3JtdWxhO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1vbGFyTWFzcygpOiBudW1iZXIge1xyXG4gICAgICAgIHZhciBtYXNzID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29tcG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbWFzcyArPSB0aGlzLmNvbXBvc2l0aW9uW2ldLm1vbGFyTWFzcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hc3M7XHJcbiAgICB9XHJcbiAgICBwYXJzZUZvcm11bGEoZm9ybXVsYTogc3RyaW5nKSB7XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJleHBvcnQgY2xhc3MgRW50aXR5IHtcclxuXHJcbn0iLCJpbXBvcnQgeyBDb25zdGl0dWVudCB9IGZyb20gXCIuL2NvbnN0aXR1ZW50XCI7XHJcbmltcG9ydCB7IEF0b20gfSBmcm9tIFwiLi9hdG9tXCI7XHJcbmltcG9ydCB7IEdyb3VwaW5nIH0gZnJvbSBcIi4vZ3JvdXBpbmdcIjtcclxuLy8gXiBDaXJjdWxhciBkZXBlbmRlbmN5P1xyXG5cclxuLypleHBvcnQgaW50ZXJmYWNlIENvbXBvc2l0aW9uIHtcclxuICAgIFtlbGVtZW50TmFtZTogc3RyaW5nXTogQ29uc3RpdHVlbnQ7XHJcbn0qL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9zaXRpb24gZXh0ZW5kcyBBcnJheTxDb25zdGl0dWVudD4ge1xyXG4gICAgLy9baW5kZXg6IG51bWJlcl06IENvbnN0aXR1ZW50O1xyXG4gICAgY29uc3RydWN0b3IoY29tcDogQXJyYXk8Q29uc3RpdHVlbnQ+ID0gW10pIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29tcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzW2ldID0gY29tcFtpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oaWxsU29ydCgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGVtcGlyaWNhbCgpOiBDb21wb3NpdGlvbiB7XHJcbiAgICAgICAgdGhpcy5oaWxsU29ydCgpO1xyXG5cclxuICAgICAgICB2YXIgZW1waXJpY2FsQ29tcCA9IEFycmF5LmZyb20odGhpcyk7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGVtcGlyaWNhbENvbXAgPSBzaW1wbGlmeShlbXBpcmljYWxDb21wKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3NpdGlvbihlbXBpcmljYWxDb21wKTtcclxuICAgIH1cclxuICAgIGdldCBmb3JtdWxhKCk6IHN0cmluZyB7XHJcbiAgICAgICAgdGhpcy5oaWxsU29ydCgpO1xyXG5cclxuICAgICAgICB2YXIgZm9ybXVsYSA9IFwiXCI7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvcm11bGEgKz0gdGhpc1tpXS5mb3JtdWxhO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZm9ybXVsYTtcclxuICAgIH1cclxuICAgIGdldCBtb2xhck1hc3MoKTogbnVtYmVyIHtcclxuICAgICAgICB2YXIgbWFzcyA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG1hc3MgKz0gdGhpc1tpXS5tb2xhck1hc3M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXNzO1xyXG4gICAgfVxyXG4gICAgaGlsbFNvcnQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zb3J0KChhLCBiKSA9PiBhLmZvcm11bGEudG9Mb3dlckNhc2UoKSA8IGIuZm9ybXVsYS50b0xvd2VyQ2FzZSgpID8gLTEgOiAxKTtcclxuXHJcbiAgICAgICAgdmFyIGNhcmJvbiA9IHRoaXMuZmluZCgoY29uc3RpdHVlbnQpID0+IGNvbnN0aXR1ZW50IGluc3RhbmNlb2YgQXRvbSAmJiBjb25zdGl0dWVudC5lbGVtZW50Lm5hbWUgPT0gXCJjYXJib25cIik7XHJcbiAgICAgICAgaWYgKGNhcmJvbikge1xyXG4gICAgICAgICAgICB2YXIgaHlkcm9nZW4gPSB0aGlzLmZpbmQoKGNvbnN0aXR1ZW50KSA9PiBjb25zdGl0dWVudCBpbnN0YW5jZW9mIEF0b20gJiYgY29uc3RpdHVlbnQuZWxlbWVudC5uYW1lID09IFwiaHlkcm9nZW5cIilcclxuICAgICAgICAgICAgaWYgKGh5ZHJvZ2VuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGljZSh0aGlzLmluZGV4T2YoaHlkcm9nZW4pLCAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudW5zaGlmdChoeWRyb2dlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zcGxpY2UodGhpcy5pbmRleE9mKGNhcmJvbiksIDEpO1xyXG4gICAgICAgICAgICB0aGlzLnVuc2hpZnQoY2FyYm9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNpbXBsaWZ5KGFycmF5OiBBcnJheTxDb25zdGl0dWVudD4pOiBBcnJheTxDb25zdGl0dWVudD4ge1xyXG4gICAgdmFyIGVtcGlyaWNhbDogQXJyYXk8Q29uc3RpdHVlbnQ+ID0gW107XHJcbiAgICB2YXIgbWluaW11bSA9IE1hdGgubWluKC4uLmFycmF5Lm1hcCgoY29uc3RpdHVlbnQpID0+IGNvbnN0aXR1ZW50LmNvdW50KSk7XHJcbiAgICBjb25zb2xlLmxvZyhtaW5pbXVtKTtcclxuICAgIGlmIChtaW5pbXVtID09IDEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhtaW5pbXVtID09IDEpO1xyXG4gICAgICAgIHRocm93IFwiRXJyb3I6IEFycmF5IG9mIGNvbnN0aXR1ZW50cyBpcyBhbHJlYWR5IHNpbXBsaWZpZWQhXCI7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJFbXBpcmljYWwgYXJyYXkgbGVuZ3RoOiBcIiArIGVtcGlyaWNhbC5sZW5ndGgpO1xyXG5cclxuICAgIGFycmF5LmZvckVhY2goY29uc3RpdHVlbnQgPT4ge1xyXG4gICAgICAgIHZhciBuZXdDb246IENvbnN0aXR1ZW50O1xyXG4gICAgICAgIGlmIChjb25zdGl0dWVudCBpbnN0YW5jZW9mIEdyb3VwaW5nKSB7XHJcbiAgICAgICAgICAgIG5ld0NvbiA9IG5ldyBHcm91cGluZyhjb25zdGl0dWVudC5jb21wb3NpdGlvbilcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXdDb24gPSBuZXcgQXRvbSgoY29uc3RpdHVlbnQgYXMgQXRvbSkuZWxlbWVudClcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5ld0NvdW50ID0gY29uc3RpdHVlbnQuY291bnQgLyBtaW5pbXVtO1xyXG4gICAgICAgIG5ld0Nvbi5jb3VudCA9IG5ld0NvdW50O1xyXG4gICAgICAgIGVtcGlyaWNhbC5wdXNoKG5ld0Nvbik7XHJcbiAgICB9KTtcclxuICAgIGlmIChlbXBpcmljYWwuZXZlcnkoKGNvbnN0aXR1ZW50KSA9PiBOdW1iZXIuaXNJbnRlZ2VyKGNvbnN0aXR1ZW50LmNvdW50KSkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlbXBpcmljYWwpO1xyXG4gICAgICAgIHJldHVybiBlbXBpcmljYWw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IFwiRXJyb3I6IEFycmF5IG9mIGNvbnN0aXR1ZW50cyBpcyBhbHJlYWR5IHNpbXBsaWZpZWQhXCI7XHJcbiAgICB9XHJcbn0iLCIvL1RoaXMgaXMgYWxsIGp1c3QgY29weS9wYXN0ZWQgb2ZmIG9mIFN0YWNrIE92ZXJmbG93LlxyXG4vL0Rvbid0IGFzayBtZSBob3cgaXQgd29ya3MuXHJcblxyXG4vKmV4cG9ydCBmdW5jdGlvbiBzZXRDYXJldFBvc2l0aW9uKGVsZW1JZDogYW55LCBjYXJldFBvczogYW55KSB7XHJcbiAgICB2YXIgZWxlbTogYW55ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbUlkKTtcclxuXHJcbiAgICBpZihlbGVtICE9IG51bGwpIHtcclxuICAgICAgICBpZihlbGVtLmNyZWF0ZVRleHRSYW5nZSkge1xyXG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBlbGVtLmNyZWF0ZVRleHRSYW5nZSgpO1xyXG4gICAgICAgICAgICByYW5nZS5tb3ZlKCdjaGFyYWN0ZXInLCBjYXJldFBvcyk7XHJcbiAgICAgICAgICAgIHJhbmdlLnNlbGVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYoZWxlbS5zZWxlY3Rpb25TdGFydCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgZWxlbS5zZXRTZWxlY3Rpb25SYW5nZShjYXJldFBvcywgY2FyZXRQb3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGVsZW0uZm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0qL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VsZWN0aW9uU3RhcnQoKSB7XHJcbiAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpLmFuY2hvck5vZGU7XHJcbiAgICByZXR1cm4gKG5vZGUubm9kZVR5cGUgPT0gMyA/IG5vZGUucGFyZW50Tm9kZSA6IG5vZGUpO1xyXG59XHJcblxyXG5cclxuLy8gbm9kZV93YWxrOiB3YWxrIHRoZSBlbGVtZW50IHRyZWUsIHN0b3Agd2hlbiBmdW5jKG5vZGUpIHJldHVybnMgZmFsc2VcclxuZXhwb3J0IGZ1bmN0aW9uIG5vZGVfd2Fsayhub2RlOmFueSAsIGZ1bmM6YW55KSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gZnVuYyhub2RlKTtcclxuICAgIGZvcihub2RlID0gbm9kZS5maXJzdENoaWxkOyByZXN1bHQgIT09IGZhbHNlICYmIG5vZGU7IG5vZGUgPSBub2RlLm5leHRTaWJsaW5nKVxyXG4gICAgICByZXN1bHQgPSBub2RlX3dhbGsobm9kZSwgZnVuYyk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH07XHJcbiAgXHJcbiAgLy8gZ2V0Q2FyZXRQb3NpdGlvbjogcmV0dXJuIFtzdGFydCwgZW5kXSBhcyBvZmZzZXRzIHRvIGVsZW0udGV4dENvbnRlbnQgdGhhdFxyXG4gIC8vICAgY29ycmVzcG9uZCB0byB0aGUgc2VsZWN0ZWQgcG9ydGlvbiBvZiB0ZXh0XHJcbiAgLy8gICAoaWYgc3RhcnQgPT0gZW5kLCBjYXJldCBpcyBhdCBnaXZlbiBwb3NpdGlvbiBhbmQgbm8gdGV4dCBpcyBzZWxlY3RlZClcclxuICBleHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZXRQb3NpdGlvbihlbGVtOiBIVE1MRWxlbWVudCkge1xyXG4gICAgdmFyIHNlbDogYW55ID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xyXG4gICAgdmFyIGN1bV9sZW5ndGggPSBbMCwgMF07XHJcbiAgXHJcbiAgICBpZihzZWwuYW5jaG9yTm9kZSA9PSBlbGVtKVxyXG4gICAgICBjdW1fbGVuZ3RoID0gW3NlbC5hbmNob3JPZmZzZXQsIHNlbC5leHRlbnRPZmZzZXRdO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgIHZhciBub2Rlc190b19maW5kID0gW3NlbC5hbmNob3JOb2RlLCBzZWwuZXh0ZW50Tm9kZV07XHJcbiAgICAgIGlmKCFlbGVtLmNvbnRhaW5zKHNlbC5hbmNob3JOb2RlKSB8fCAhZWxlbS5jb250YWlucyhzZWwuZXh0ZW50Tm9kZSkpXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdmFyIGZvdW5kID0gWzAsMF07XHJcbiAgICAgICAgdmFyIGk7XHJcbiAgICAgICAgbm9kZV93YWxrKGVsZW0sIGZ1bmN0aW9uKG5vZGU6IGFueSkge1xyXG4gICAgICAgICAgZm9yKGkgPSAwOyBpIDwgMjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKG5vZGUgPT0gbm9kZXNfdG9fZmluZFtpXSkge1xyXG4gICAgICAgICAgICAgIChmb3VuZFtpXSBhcyBhbnkpID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBpZihmb3VuZFtpID09IDAgPyAxIDogMF0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIGFsbCBkb25lXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICBcclxuICAgICAgICAgIGlmKG5vZGUudGV4dENvbnRlbnQgJiYgIW5vZGUuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCAyOyBpKyspIHtcclxuICAgICAgICAgICAgICBpZighZm91bmRbaV0pXHJcbiAgICAgICAgICAgICAgICBjdW1fbGVuZ3RoW2ldICs9IG5vZGUudGV4dENvbnRlbnQubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY3VtX2xlbmd0aFswXSArPSBzZWwuYW5jaG9yT2Zmc2V0O1xyXG4gICAgICAgIGN1bV9sZW5ndGhbMV0gKz0gc2VsLmV4dGVudE9mZnNldDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYoY3VtX2xlbmd0aFswXSA8PSBjdW1fbGVuZ3RoWzFdKVxyXG4gICAgICByZXR1cm4gY3VtX2xlbmd0aDtcclxuICAgIHJldHVybiBbY3VtX2xlbmd0aFsxXSwgY3VtX2xlbmd0aFswXV07XHJcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0=